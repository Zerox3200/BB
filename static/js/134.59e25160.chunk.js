"use strict";(self.webpackChunkbakistan=self.webpackChunkbakistan||[]).push([[134],{5134:(a,e,s)=>{s.r(e),s.d(e,{default:()=>h});var l=s(5043),t=s(3892),r=s(899),i=s(7154),n=s(9793),o=s(3216),d=s(4746),m=s(4420),c=s(579);function h(){const[a,e]=(0,l.useState)(!1),[s,h]=(0,l.useState)(),{setUserInformation:p}=(0,l.useContext)(d.R),u=(0,o.Zp)();let b=r.Ik({email:r.Yj().required("email is required").email("invalid email"),password:r.Yj().required("password is required")});let x=(0,t.Wx)({initialValues:{email:"",password:""},validationSchema:b,onSubmit:async function(a){return e(!0),await i.A.post("http://localhost:3000/auth/login",{email:a.email,password:a.password}).then((a=>{e(!1),a.data.token&&(n.s.set("token",a.data.token),p((0,m.s)(a.data.token)),u("/DashApps2030")),h(a.data)})).catch((a=>{h(a),e(!1)}))}});return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("section",{className:"Login",children:(0,c.jsxs)("div",{className:"login-main ",children:[(0,c.jsx)("h1",{className:"font-color h2",children:"Login"}),(0,c.jsxs)("form",{onSubmit:x.handleSubmit,children:[(0,c.jsx)("label",{htmlFor:"email",className:"form-label mt-3",children:"Email"}),(0,c.jsx)("input",{className:"form-control",placeholder:"Email",onBlur:x.handleBlur,onChange:x.handleChange,type:"email",name:"email",id:"email"}),x.errors.email&&x.touched.email&&(0,c.jsx)("div",{className:"alert alert-danger py-2 mt-2",children:x.errors.email}),(0,c.jsx)("label",{htmlFor:"password",className:"form-label mt-3",children:"Password"}),(0,c.jsx)("input",{className:"form-control",placeholder:"Password",onBlur:x.handleBlur,onChange:x.handleChange,type:"password",name:"password",id:"password"}),x.errors.password&&x.touched.password&&(0,c.jsx)("div",{className:"alert alert-danger py-2 mt-2",children:x.errors.password}),a?(0,c.jsx)("button",{type:"button",className:"btn bg-main text-light mt-2",children:(0,c.jsx)("i",{className:"fas fa-spinner fa-spin "})}):(0,c.jsx)("button",{type:"submit",disabled:!(x.isValid&&x.dirty),className:"btn  bg-main text-light mt-2",children:"Login"}),s&&(0,c.jsx)("div",{className:"alert alert-danger py-2 mt-2",children:s})]})]})})})}}}]);
//# sourceMappingURL=134.59e25160.chunk.js.map